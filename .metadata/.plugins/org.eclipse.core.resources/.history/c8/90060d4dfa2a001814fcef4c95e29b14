package com.orm.service;

import org.hibernate.Session;
import org.hibernate.transform.AliasToEntityMapResultTransformer;

import com.orm.configuracion.AppConfig;
import com.orm.entity.Propietario;
import org.hibernate.Transaction;
import java.util.Iterator;
import java.util.List;
import org.hibernate.Query;

public class PropietariosService {

	private  static Session session;
	private  AppConfig conf;
	
	
	public PropietariosService(Session session) {
		this.session = session;
		
	}
	public void insertarPropietario(Propietario prop) {
		session.beginTransaction();
		session.save(prop);
		session.getTransaction().commit();

	}
	
	public void modificarPropietario(Propietario propietario) {
		session.beginTransaction();
		session.update(propietario);
		session.getTransaction().commit();
		
	}
	public void eliminarPropietario(Propietario prop) {
		session.beginTransaction();
		session.delete(prop);
		session.getTransaction().commit();
		
	}
	
	public Propietario consultarPropietarioByDni(Propietario prop) {
		Transaction tx=null;
		tx=session.beginTransaction(); //Crea una transacción
		Propietario propietario = (Propietario) session.get(Propietario.class,prop.getDni());
		tx.commit(); //MAterializa la transacción
        //session.close();
		return propietario;
		
	}
	public Propietario consultarPropietarioByUsuarioPassword(Propietario prop) {
		String query= "Select * from propietarios where usuario ='"+ prop.getUsuario()+ "' and numerosecreto='" + prop.getNumerosecreto() + "'";
		 Propietario propietario = (Propietario) session.createQuery(query);
		return propietario;
		
		 
		
		
	}
	
	public boolean validarUsuarioPassword(String usuario,String password) {
		String query= "select * from propietarios where usuario = '" + usuario + "' and numerosecreto = '" +  password + "'";
		Query q= session.createQuery(query);
		return false;
		
		
	}
	
}
